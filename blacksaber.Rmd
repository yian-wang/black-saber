---
title: "Potential Gender Biases in the Workplace"
subtitle: "Investigating the Hiring Process, Promotions, and Salaries in Black Saber Software"
author: "Report prepared for Black Saber Software by The Hive"
date: April 21, 2021
lang: "en"
output:
  pdf_document:
    template: report.tex
    toc: true
    toc_depth: 2
titlepage: true
titlepage-color: "FFC300"
titlepage-text-color: "FFFFFF"
titlepage-rule-color: "FFFFFF"
titlepage-rule-height: 2
---

```{r, message = FALSE, echo=FALSE}
library(tidyverse)
# this should suppress all code and messages
knitr::opts_chunk$set(include=FALSE)
```

# General comments (you can delete this section)

_You can delete this section, and if you want to check what it said, just open a template from the package again. You don't have to use this particular template, but you DO need to write you report in RMarkdown and include a cover page._

_The cover page must have:_

*	_A title and subtitle_
* _"Report prepared for Black Saber Software by" your company name_
*	_Date (assessment submission date is fine)_

_You can change the colour of this cover to any colour you would like by replacing 6C3082 in the YAML above (line 11) to another hex code. You could use this tool to help you:_ https://htmlcolorcodes.com/color-picker/

\newpage
# Executive summary

_Guidelines for the executive summary:_

* _No more than two pages_
* _Language is appropriate for a non-technical audience_
* _Bullet points are used where appropriate_
*	_A small number of key visualizations and/or tables are included_
*	_All three research questions are addressed_


\newpage
# Technical report
_This part of the report is much more comprehensive than the executive summary. The audience is statistics/data-minded people, but you should NOT include code or unformatted R output here._


## Introduction

_Provide a brief introduction to your report and outline what the report will cover. This section is valuable for setting scope and expectations. _

### Research questions
_Use bullet points to to describe the research questions you are going to address. Write in full sentences._
Hiring
Promotion

## Hiring Process
```{r}
phase1 = read_csv("data/phase1-new-grad-applicants-2020.csv")
phase2 = read_csv("data/phase2-new-grad-applicants-2020.csv")
phase3 = read_csv("data/phase3-new-grad-applicants-2020.csv")
final_hires = read_csv("data/final-hires-newgrad_2020.csv")
```

```{r}
#checking to see if datasets have NAs to see (1) if we need to do anything about them (2) so we can filter them out in the next round when we're seeing who got into the next round
sum(is.na(phase1))
sum(is.na(phase2)) 
sum(is.na(phase3))
```

### Round 1
```{r}
round1_2 = full_join(phase1, phase2)
round1_2 = round1_2 %>% 
  #technical skills is only under hiring2, which means if an applicant's id has NA for this column, they did not move onto the next round
  mutate(next_round = !is.na(technical_skills)) %>%  
  mutate(next_round = as.integer(next_round)) %>% 
  select(-c(technical_skills, writing_skills, leadership_presence, speaking_skills)) #remove phase 2 data

#split into software/data
round1_data = round1_2 %>% 
  filter(team_applied_for == "Data") %>% 
  mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))

round1_software = round1_2 %>% 
  filter(team_applied_for == "Software") %>% 
  mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))
```

``` {r}
#see m/f/other demographics within each data/software applicant pool
# visualizations

r1_data_gender_plot = round1_data %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF", "#C4E48A")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Data Applicant Gender Breakdown (Round 1)", x = "Gender", y = "Number of Applicants") 
#do we want a title or a caption for this?
r1_data_gender_plot
ggsave("images/r1_data_gender_plot.png", width = 7, height = 4)

r1_software_gender_plot = round1_software %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF", "#C4E48A")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Software Applicant Gender Breakdown (Round 1)", x = "Gender", y = "Number of Applicants")
r1_software_gender_plot
#do we want a title or a caption for this?
ggsave("images/r1_software_gender_plot.png", width = 7, height = 4)
```
![](images/r1_data_gender_plot.png)
![](images/r1_software_gender_plot.png)

```{r}
#get counts for each gender in data -> for report
table(round1_data$gender)
#get counts for each gender in software -> for report
table(round1_software$gender)
```

### Round 2
```{r}
round2_3 = full_join(phase2, phase3)

round2_3 = round2_3 %>% 
  #technical skills is only under hiring2, which means if an applicant's id has NA for this column, they did not move onto the next round
  mutate(next_round = !is.na(interviewer_rating_1)) %>%  
  mutate(next_round = as.integer(next_round)) %>% 
  select(-c(interviewer_rating_1, interviewer_rating_2)) #remove phase 2 data

#split into software/data
round2_data = round2_3 %>% 
  filter(team_applied_for == "Data") %>% 
  mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))

round2_software = round2_3 %>% 
  filter(team_applied_for == "Software") %>% 
  mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))
```

``` {r}
#see m/f/other demographics within each data/software applicant pool
# visualizations

r2_data_gender_plot = round2_data %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF", "#C4E48A")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Data Applicant Gender Breakdown (Round 2)", x = "Gender", y = "Number of Applicants") 
#do we want a title or a caption for this?
r2_data_gender_plot
ggsave("images/r2_data_gender_plot.png", width = 7, height = 4)

r2_software_gender_plot = round2_software %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF", "#C4E48A")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Software Applicant Gender Breakdown (Round 2)", x = "Gender", y = "Number of Applicants")
r2_software_gender_plot
#do we want a title or a caption for this?
ggsave("images/r2_software_gender_plot.png", width = 7, height = 4)
```
![](images/r2_data_gender_plot.png)
![](images/r2_data_gender_plot.png)
```{r}
#get counts for each gender in data -> for report
table(round2_data$gender)
#get counts for each gender in software -> for report
table(round2_software$gender)
```

### Round 3
```{r}
#combined stats of ppl that applied in round 3
round3_combined = right_join(phase2, phase3)
round3_combined = round3_combined %>% 
  select(applicant_id, team_applied_for, gender,interviewer_rating_1,interviewer_rating_2)

#people from round 3 who were hired
round3_h = right_join(round3_combined, final_hires)

#split into data/software
round3_data = round3_combined %>% 
  filter(team_applied_for == "Data") 
# no more "prefer not to say" so we don't need to rearrange
#%>% 
  #mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))

round3_software = round3_combined %>% 
  filter(team_applied_for == "Software") #%>% 
  #mutate(gender = fct_relevel(gender, "Prefer not to say", after = 2))
```


```{r}
#visualizations of round 3 applicants 
r3_data_gender_plot = round3_data %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Data Applicant Gender Breakdown (Round 3)", x = "Gender", y = "Number of Applicants") 
#do we want a title or a caption for this?
r3_data_gender_plot
ggsave("images/r3_data_gender_plot.png", width = 7, height = 4)

r3_software_gender_plot = round3_software %>% 
  ggplot(aes(x = gender)) + geom_bar(fill = c("#FFC300", "#A381FF")) +
  #geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Software Applicant Gender Breakdown (Round 3)", x = "Gender", y = "Number of Applicants")
r3_software_gender_plot
#do we want a title or a caption for this?
ggsave("images/r3_software_gender_plot.png", width = 7, height = 4)
```
![](images/r3_data_gender_plot.png)
![](images/r3_data_gender_plot.png)
_For each research question, you will want to briefly describe any data manipulation, show some exploratory plots/summary tables, report on any methods you use (i.e. models you fit) and the conclusions you draw from these_


```{r}
# This chunk provides an example of some things you can do with RMarkdown to make your report creation process easier

# read in the data
black_saber_current_employees <- read_csv("data/black-saber-current-employees.csv")

# create a visualisation
my_plot <- black_saber_current_employees %>% 
  ggplot(aes(x = productivity)) +
  geom_histogram(colour = "grey", fill = "#6C3082") +
  theme_minimal() +
  labs(title = "Look! A title. But do you want a title or a caption for your report?", x = "This is a changed x label")

# save your plot in your images folder, you can specify the height and width, too
# saving this means you can add the image to your exectuve summary without having to run or rerun the code, if you wish
ggsave("images/example.png", width = 7, height = 4)

# norice how the image is included with the ![](file/path.png) below
```

![](images/example.png)

## Promotions 

## Salary

```{r, include = FALSE}
library(tidyverse)
library(lme4)
```

## Discussion

_In this section you will summarize your findings across all the research questions and discuss the strengths and limitations of your work. It doesn't have to be long, but keep in mind that often people will just skim the intro and the discussion of a document like this, so make sure it is useful as a semi-standalone section (doesn't have to be completely standalone like the executive summary)._

### Strengths and limitations

\newpage
# Consultant information
## Consultant profiles

*Complete this section with a brief bio for each member of your group. If you are completing the project individually, you only need to complete one for yourself. In that case, change the title of this section to 'Consultant profile' instead. Examples below. This section is only marked for completeness, clarity and professionalism, not 'truth' so you can write it as if we're a few years in the future. Put your current degree in as completed and/or add your first choice grad school program, whatever you like. What skills related skills would you most like to highlight? What job title do you want?*

**Yian Wang**. Yian is a junior consultant at The Hive. She specializes in data visualization and analysis. Yian earned her Bachelor of Science, double majoring in Statistics and Economics, and minoring in Mathematics from the University of Toronto in June 2021. 

**Datana Scatterplot**. Datana is a junior consultant with Eminence Analytics. They specialize in reproducible analysis and statistical communication. Datana earned their Bachelor of Science, Majoring in Computer Science and Statistics from the University of Toronto in 2024.

## Code of ethical conduct

_This section should be fairly short, no more than half a page. Assume a general audience, much like your executive summary._


* _Make at least three relevant statements about your company’s approach to ethical statistical consulting. These should be appropriately in line with professional conduct advice like the (Statistical Society of Canada Code of Conduct)[https://ssc.ca/sites/default/files/data/Members/public/Accreditation/ethics_e.pdf] or the (Ethical Guidelines for Statistical Practice from the American Statistical Society)[https://www.amstat.org/ASA/Your-Career/Ethical-Guidelines-for-Statistical-Practice.aspx]. For example, "the customer is always right" ISN’T the type of thing an ethical statistical consultant would include._
*	_Be very careful not to just copy and paste from these other documents! Put things in your own words._


__Final advice: KNIT EARLY AND OFTEN!__